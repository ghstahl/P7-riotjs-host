{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6bc774882113555d79f1","webpack:///./app/p7-host-core/utils/deep-freeze.js","webpack:///./app/p7-host-core/stores/route-store.js","webpack:///./app/p7-host-core/stores/component-loader-store.js","webpack:///./app/p7-host-core/stores/dynamic-jscss-loader-store.js","webpack:///./app/p7-host-core/stores/progress-store.js","webpack:///./app/p7-host-core/stores/riotcontrol-store.js","webpack:///./app/p7-host-core/stores/error-store.js","webpack:///./app/p7-host-core/stores/fetch-store.js","webpack:///./app/p7-host-core/stores/localstorage-store.js","webpack:///./app/p7-host-core/stores/plugin-registration-store.js","webpack:///./app/p7-host-core/stores/riotcontrol-dispatch-store.js","webpack:///./app/p7-host-core/stores/startup-store.js","webpack:///external \"riot\"","webpack:///./app/p7-host-core/router.js","webpack:///./app/p7-host-core/extensions/riot-route-extension.js","webpack:///./app/p7-host-core/master-event-table.js","webpack:///./app/p7-host-core/utils/random-string.js","webpack:///./app/p7-host-core/components/startup.tag","webpack:///external \"riot-route\"","webpack:///external \"riotcontrol\"","webpack:///./app/p7-host-core/index.js","webpack:///external \"whatwg-fetch\""],"names":["DeepFreeze","freeze","o","Object","getOwnPropertyNames","forEach","prop","hasOwnProperty","isFrozen","Constants","NAME","NAMESPACE","WELLKNOWN_EVENTS","in","routeCatchallReset","routeDispatch","contributeCatchAllRoute","riotRouteAddView","riotRouteRemoveView","riotRouteLoadView","out","riotRouteDispatchAck","RouteStore","getConstants","riot","observable","_bound","postResetRoute","bindEvents","on","_onContributeCatchAllRoute","_onRouteDispatch","_onRouteCatchallReset","_onRiotRouteAddView","_onRiotRouteRemoveView","_onRiotRouteLoadView","unbindEvents","off","r","console","log","state","componentLoaderState","components","item","component","loaded","routeLoad","route","path","currentPath","control","trigger","key","defaultRoute","force","current","same","exec","routeState","routeDispatchAck","router","resetCatchAll","view","s","_viewsSet","add","views","Array","from","delete","loadView","DJCWKE","addDynamicComponent","addDynamicComponents","loadDynamicComponent","unloadDynamicComponent","componentLoadComplete","componentUnloadComplete","loadExternalJsCssAck","unloadExternalJsCssAck","allComponentsLoadComplete","componentLoaderStoreStateUpdated","loadExternalJsCss","unloadExternalJsCss","ComponentLoaderStore","_components","Set","_onLoadDynamicComponent","_onUnloadDymanicComponent","_onAddDynamicComponent","_onAddDynamicComponents","_onLoadExternalJsCssAck","_onUnloadExternalJsCssAck","_onComponentLoadComplete","_onComponentUnloadComplete","_commitToState","componentsArray","Map","map","i","_addComponent","_findComponent","result","onLoad","triggerItem","event","data","error","onUnload","comp","_allLoadedCompleteCheck","ack","evt","loadedComplete","DynamicJsCssLoaderStore","_componentsAddedSet","_safeLoadExternal","_removeExternal","mySet","_deleteComponent","addedCompoment","_loadExternal","_removeExternalByFile","filename","filetype","targetelement","targetattr","allsuspects","document","getElementsByTagName","length","getAttribute","indexOf","parentNode","removeChild","jsBundle","cssBundle","fileref","createElement","setAttribute","appendChild","inprogressDone","inprogressStart","progressStart","progressCount","progressDone","ProgressStore","_count","_onInProgressStart","_onInProgressDone","count","riotContolAddStore","riotContolRemoveStore","RiotControlStore","_stores","EVT","riotControlStore","_onAdd","_onRemove","name","store","addStore","splice","RSWKE","errorCatchAll","ErrorStore","_error","_onError","PSWKE","fetch","FetchStore","_onFetch","input","init","jsonFixup","fetchStore","credentials","headers","body","type","JSON","stringify","myTrigger","parse","then","response","status","ok","method","json","catch","ex","self","localstorageSet","localstorageGet","localstorageRemove","localstorageClear","LocalStorageStore","_onSet","_onGet","_onClear","query","localStorage","setItem","stored","getItem","riotControl","removeItem","clear","RCSWKE","pluginRegistration","pluginUnregistration","pluginRegistrationChanged","pluginRegistrationAck","pluginUnregistrationAck","PluginRegistrationStore","registeredPlugins","_registerPlugin","_unregisterPlugin","_findRegistration","registrationName","_removeRegistration","registration","foundRegistration","preUnloadEvents","stores","uninitialize","initialize","postLoadEvents","dispatch","RiotControlDispatchStore","_onDispatch","CLSWKE","start","fetchConfig","fetchConfigResult","fetchConfigResult2","componentsAdded","StartupStore","_startupComplete","_done","_onStart","_onFetchConfig","_onFetchConfigResult2","_onFetchConfigResult","_onComponentsAdded","_onAllComponentsLoadComplete","errorStore","code","componentLoaderStore","url","trigger2","nextTag","mount","Router","create","stop","registrants","routeContributer","contributeRoutes","_currentView","unmount","RiotRouteExtension","namespace","_defaultParser","split","_getCurrentPath","parser","MasterEventTable","progressStore","routeStore","dynamicJsCssLoaderStore","localStorageStore","riotControlDispatchStore","pluginRegistrationStore","startupStore","RandomString","generateRandomString","text","possible","charAt","Math","floor","random","hashString","str","hash","charCodeAt","randomHash","require","tag2","opts","config","onStartupTagFetchConfigAck","P7HostCore","_masterEventTable","_name","window","Initialize","randomString","_internal","_riotRouteExtension","_progressStore","_dynamicJsCssLoaderStore","_componentLoaderStore","_errorStore","_fetchStore","_localStorageStore","_riotControlStore","_routeStore","_pluginRegistrationStore","_riotControlDispatchStore","_startupStore"],"mappings":"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","file":"P7HostCore.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"), require(\"riot-route\"), require(\"riotcontrol\"), require(\"whatwg-fetch\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"P7HostCore\", [\"riot\", \"riot-route\", \"riotcontrol\", \"whatwg-fetch\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"P7HostCore\"] = factory(require(\"riot\"), require(\"riot-route\"), require(\"riotcontrol\"), require(\"whatwg-fetch\"));\n\telse\n\t\troot[\"P7HostCore\"] = factory(root[\"riot\"], root[\"riot-route\"], root[\"riotcontrol\"], root[\"whatwg-fetch\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_21__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6bc774882113555d79f1","// https://github.com/substack/deep-freeze\r\n\r\nexport default class DeepFreeze {\r\n  static freeze(o) {\r\n    Object.freeze(o);\r\n    Object.getOwnPropertyNames(o).forEach(function (prop) {\r\n      if (o.hasOwnProperty(prop) &&\r\n          o[prop] !== null &&\r\n          (typeof o[prop] === 'object' || typeof o[prop] === 'function') &&\r\n          !Object.isFrozen(o[prop])) {\r\n        DeepFreeze.freeze(o[prop]);\r\n      }\r\n    }\r\n    );\r\n    return o;\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/utils/deep-freeze.js","import DeepFreeze from '../utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'route-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    routeCatchallReset: 'route-catchall-reset',\r\n    routeDispatch: 'riot-route-dispatch',\r\n    contributeCatchAllRoute: 'contribute-catchall-route',\r\n    riotRouteAddView: 'riot-route-add-view',\r\n    riotRouteRemoveView: 'riot-route-remove-view',\r\n    riotRouteLoadView: 'riot-route-load-view'\r\n  },\r\n  out: {\r\n    riotRouteDispatchAck: 'riot-route-dispatch-ack'\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class RouteStore {\r\n\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this.postResetRoute = null;\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.contributeCatchAllRoute, this._onContributeCatchAllRoute);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.routeDispatch, this._onRouteDispatch);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.routeCatchallReset, this._onRouteCatchallReset);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.riotRouteAddView, this._onRiotRouteAddView);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.riotRouteRemoveView, this._onRiotRouteRemoveView);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.riotRouteLoadView, this._onRiotRouteLoadView);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.contributeCatchAllRoute, this._onContributeCatchAllRoute);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.routeDispatch, this._onRouteDispatch);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.routeCatchallReset, this._onRouteCatchallReset);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.riotRouteAddView, this._onRiotRouteAddView);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.riotRouteRemoveView, this._onRiotRouteRemoveView);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.riotRouteLoadView, this._onRiotRouteLoadView);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n\r\n  _onContributeCatchAllRoute(r) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.contributeCatchAllRoute, r);\r\n    if (riot.state.componentLoaderState && riot.state.componentLoaderState.components) {\r\n      for (let item of riot.state.componentLoaderState.components) {\r\n        let component = item[1];\r\n\r\n        if (component.state.loaded === false) {\r\n          r(component.routeLoad.route, ()=>{\r\n            console.log('catchall route handler of:', component.routeLoad.route);\r\n\r\n            let path = riot.route.currentPath();\r\n\r\n            this.postResetRoute = path;\r\n            riot.control.trigger('load-dynamic-component', component.key);\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    r('/..', ()=>{\r\n      console.log('route handler of /  ');\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.in.routeDispatch,\r\n        riot.state.route.defaultRoute);\r\n    });\r\n    if (this.postResetRoute != null) {\r\n      let postResetRoute = this.postResetRoute;\r\n\r\n      this.postResetRoute = null;\r\n      riot.control.trigger('riot-route-dispatch', postResetRoute, true);\r\n    }\r\n  }\r\n  _onRouteDispatch(route, force) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.routeDispatch, route);\r\n    let current = riot.route.currentPath();\r\n\r\n    let same = current === route;\r\n\r\n    if (!same) {\r\n      same = ('/' + current) === route;\r\n    }\r\n    if (!same) {\r\n      riot.route(route);\r\n    } else {\r\n      if (force) {\r\n        riot.route.exec();\r\n      }\r\n    }\r\n\r\n    riot.routeState.route = route;\r\n    this.trigger(Constants.WELLKNOWN_EVENTS.out.routeDispatchAck, route);\r\n  }\r\n  _onRouteCatchallReset() {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.routeCatchallReset);\r\n    riot.router.resetCatchAll();\r\n  }\r\n  _onRiotRouteAddView(view) {\r\n    console.log(Constants.NAME, 'riot-route-add-view', view);\r\n    let s = this._viewsSet;\r\n\r\n    s.add(view);\r\n    riot.routeState.views = Array.from(s);\r\n  }\r\n  _onRiotRouteRemoveView(view) {\r\n    console.log(Constants.NAME, 'riot-route-remove-view', view);\r\n    let s = this._viewsSet;\r\n\r\n    s.delete(view);\r\n    riot.routeState.views = Array.from(s);\r\n  }\r\n  _onRiotRouteLoadView(view) {\r\n    console.log(Constants.NAME, 'riot-route-load-view', view);\r\n    riot.router.loadView(view);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/route-store.js","/*\r\n\r\nvar testComponent = {\r\n  \"components\": [{\r\n    \"key\": \"typicode-component\",\r\n    \"jsBundle\": {\r\n      \"path\": \"/partial/typicode_component/bundle.js\"\r\n    },\r\n    \"cssBundle\": {\r\n      \"path\": \"/partial/typicode_component/styles.css\"\r\n    },\r\n\r\n    \"trigger\": {\r\n      \"onLoad\": [{\r\n        \"event\": \"SidebarStore:sidebar-add-item\",\r\n        \"data\": {\r\n          \"title\": \"My Components Page\",\r\n          \"route\": \"my-component-page/home\"\r\n        }\r\n      }],\r\n      \"onUnload\": [{\r\n        \"event\": \"SidebarStore:sidebar-remove-item\",\r\n        \"data\": {\r\n          \"title\": \"My Components Page\"\r\n        }\r\n      }, {\r\n        \"event\": \"plugin-unregistration\",\r\n        \"data\": {\r\n          \"name\": \"typicode-component\"\r\n        }\r\n      }]\r\n    },\r\n    \"routeLoad\": {\r\n      \"route\": \"/my-component-page..\"\r\n    },\r\n    \"state\": {\r\n      \"loaded\": false\r\n    }\r\n  }]\r\n};\r\n\r\nriot.control.trigger('init-component-loader-store');\r\nriot.control.trigger('add-dynamic-component',testComponent);\r\n\r\n*/\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\nimport DynamicJsCssLoaderStore from './dynamic-jscss-loader-store.js';\r\n\r\nconst DJCWKE = DynamicJsCssLoaderStore.getConstants().WELLKNOWN_EVENTS;\r\n\r\nclass Constants {}\r\nConstants.NAME = 'component-loader-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    addDynamicComponent: 'add-dynamic-component',\r\n    addDynamicComponents: 'add-dynamic-components',\r\n    loadDynamicComponent: 'load-dynamic-component',\r\n    unloadDynamicComponent: 'unload-dynamic-component',\r\n    componentLoadComplete: 'component-load-complete',\r\n    componentUnloadComplete: 'component-unload-complete',\r\n    loadExternalJsCssAck: DJCWKE.out.loadExternalJsCssAck,\r\n    unloadExternalJsCssAck: DJCWKE.out.unloadExternalJsCssAck\r\n  },\r\n  out: {\r\n    allComponentsLoadComplete: 'all-components-load-complete',\r\n    componentLoaderStoreStateUpdated: 'component-loader-store-state-updated',\r\n    loadExternalJsCss: DJCWKE.in.loadExternalJsCss,\r\n    unloadExternalJsCss: DJCWKE.in.unloadExternalJsCss\r\n\r\n  }\r\n};\r\n\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class ComponentLoaderStore {\r\n\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._components = new Set();\r\n    riot.state.componentLoaderState = {};\r\n    this.state = riot.state.componentLoaderState;\r\n    this._bound = false;\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.loadDynamicComponent, this._onLoadDynamicComponent);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.unloadDynamicComponent, this._onUnloadDymanicComponent);\r\n\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.addDynamicComponent, this._onAddDynamicComponent);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.addDynamicComponents, this._onAddDynamicComponents);\r\n\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.loadExternalJsCssAck, this._onLoadExternalJsCssAck);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.unloadExternalJsCssAck, this._onUnloadExternalJsCssAck);\r\n\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.componentLoadComplete, this._onComponentLoadComplete);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.componentUnloadComplete, this._onComponentUnloadComplete);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.loadDynamicComponent, this._onLoadDynamicComponent);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.unloadDynamicComponent, this._onUnloadDymanicComponent);\r\n\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.addDynamicComponent, this._onAddDynamicComponent);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.addDynamicComponents, this._onAddDynamicComponents);\r\n\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.loadExternalJsCssAck, this._onLoadExternalJsCssAck);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.unloadExternalJsCssAck, this._onUnloadExternalJsCssAck);\r\n\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.componentLoadComplete, this._onComponentLoadComplete);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.componentUnloadComplete, this._onComponentUnloadComplete);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n\r\n  _commitToState() {\r\n\r\n    var componentsArray = Array.from(this._components);\r\n\r\n    this.state.components = new Map(componentsArray.map((i) => [i.key, i]));\r\n    this.trigger(Constants.WELLKNOWN_EVENTS.out.componentLoaderStoreStateUpdated);\r\n  }\r\n  _addComponent(component) {\r\n\r\n    if (this._findComponent(component.key) == null) {\r\n      this._components.add(component);\r\n      this._commitToState();\r\n    }\r\n  }\r\n  _findComponent(key) {\r\n\r\n    for (let item of this._components) {\r\n      if (item.key === key) {\r\n        return item;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  _onLoadExternalJsCssAck(result) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.loadExternalJsCssAck, result);\r\n\r\n    let component = this._findComponent(result.component.key);\r\n\r\n    if (component != null) {\r\n            // this is ours\r\n      if (result.state === true) {\r\n        for (let triggerItem of component.trigger.onLoad) {\r\n          riot.control.trigger(triggerItem.event, triggerItem.data);\r\n        }\r\n        component.state.loaded = true;\r\n\r\n      } else {\r\n        console.error(result.error);\r\n      }\r\n    }\r\n  }\r\n\r\n  _onUnloadExternalJsCssAck(result) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.unloadExternalJsCssAck, result);\r\n    let key = result.component.key;\r\n    let component = this._findComponent(key);\r\n\r\n    if (component != null) {\r\n            // this is ours\r\n      if (result.state === true) {\r\n        for (let triggerItem of component.trigger.onUnload) {\r\n          riot.control.trigger(triggerItem.event, triggerItem.data);\r\n        }\r\n        component.state.loaded = false;\r\n        riot.control.trigger(Constants.WELLKNOWN_EVENTS.in.componentUnloadComplete, key);\r\n\r\n      } else {\r\n        console.error(result.error);\r\n      }\r\n    }\r\n  }\r\n  _onAddDynamicComponent(component) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.addDynamicComponent, component);\r\n    let comp = this._findComponent(component.key);\r\n\r\n    if (comp == null) {\r\n      this._addComponent(component);\r\n\r\n      if (this._allLoadedCompleteCheck() === true) {\r\n                // need to trigger a load complete just on a simple add so that auto route loading can work\r\n        riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.allComponentsLoadComplete);\r\n      }\r\n    }\r\n  }\r\n\r\n  _onAddDynamicComponents(components, ack) {\r\n\r\n    if (components) {\r\n      console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.addDynamicComponents, components);\r\n      for (let component of components) {\r\n        let comp = this._findComponent(component.key);\r\n\r\n        if (comp === null) {\r\n          this._addComponent(component);\r\n        }\r\n      }\r\n    }\r\n    riot.control.trigger(ack.evt, ack);\r\n  }\r\n\r\n  _onLoadDynamicComponent(key) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.loadDynamicComponent, key);\r\n    let component = this._findComponent(key);\r\n\r\n    if (component != null && component.state.loaded !== true) {\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.loadExternalJsCss, component);\r\n    }\r\n  }\r\n  _onUnloadDymanicComponent(key) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.unloadDynamicComponent, key);\r\n    let component = this._findComponent(key);\r\n\r\n    if (component != null && component.state.loaded === true) {\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.unloadExternalJsCss, component);\r\n    }\r\n  }\r\n\r\n  _allLoadedCompleteCheck() {\r\n\r\n    var result = true;\r\n\r\n    for (let item of this._components) {\r\n      if (item.state.loaded === true && item.state.loadedComplete === false) {\r\n        result = false;\r\n        break;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  _onComponentLoadComplete(key) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.componentLoadComplete, key);\r\n    let component = this._findComponent(key);\r\n\r\n    if (component != null && component.state.loaded === true) {\r\n      component.state.loadedComplete = true;\r\n      if (this._allLoadedCompleteCheck() === true) {\r\n        riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.allComponentsLoadComplete);\r\n      }\r\n    }\r\n  }\r\n  _onComponentUnloadComplete(key) {\r\n\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.componentUnloadComplete, key);\r\n    let component = this._findComponent(key);\r\n\r\n    if (component != null) {\r\n      component.state.loadedComplete = false;\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.allComponentsLoadComplete);\r\n    }\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/component-loader-store.js","// http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml\r\n\r\n/*\r\ncomponent:{\r\n\t\tkey:'typicode-component',\r\n\t\tpath:'/partial/bundle.js',\r\n\t\ttype:'js'\r\n\t}\r\n\tor when unloading\r\ncomponent:{\r\n\t\tkey:'typicode-component'\r\n\t}\r\n\r\nevents:{\r\n\tout:[\r\n\t\t{\r\n\t\t\tevent:'load-external-jscss-ack',\r\n\t\t\ttype:'riotcontrol'\r\n\t\t\tdata:[\r\n\t\t\t\t{\r\n\t\t\t    \tstate:true,\r\n\t\t\t    \tcomponent:component\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t    \tstate:false,\r\n\t\t\t    \tcomponent:component,\r\n\t\t\t    \terror:\"component already added!\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tevent:'unload-external-jscss-ack',\r\n\t\t\ttype:'riotcontrol'\r\n\t\t\tdata:[\r\n\t\t\t\t{\r\n\t\t\t    \tstate:true,\r\n\t\t\t    \tcomponent:component\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t    \tstate:false,\r\n\t\t\t    \tcomponent:component,\r\n\t\t\t    \terror:\"no entry found to remove!\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t]\r\n\r\n}\r\n\r\n\t*/\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'dynamic-jscss-loader-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    loadExternalJsCss: Constants.NAMESPACE + 'load-external-jscss',\r\n    unloadExternalJsCss: Constants.NAMESPACE + 'unload-external-jscss'\r\n  },\r\n  out: {\r\n    loadExternalJsCssAck: Constants.NAMESPACE + 'load-external-jscss-ack',\r\n    unloadExternalJsCssAck: Constants.NAMESPACE + 'unload-external-jscss-ack'\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class DynamicJsCssLoaderStore {\r\n\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._componentsAddedSet = new Set();\r\n    this._bound = false;\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.loadExternalJsCss,\tthis._safeLoadExternal);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.unloadExternalJsCss,\tthis._removeExternal);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.loadExternalJsCss,\tthis._safeLoadExternal);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.unloadExternalJsCss,\tthis._removeExternal);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  _addComponent(component) {\r\n    if (this._findComponent(component) == null) {\r\n      let mySet = this._componentsAddedSet;\r\n\r\n      mySet.add(component);\r\n\r\n    }\r\n  }\r\n\r\n  _findComponent(component) {\r\n    let mySet = this._componentsAddedSet;\r\n\r\n    for (let item of mySet) {\r\n      if (item.key === component.key) {return item;}\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _deleteComponent(component) {\r\n    let mySet = this._componentsAddedSet;\r\n\r\n    for (let item of mySet) {\r\n      if (item.key === component.key) {\r\n        mySet.delete(item);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  _safeLoadExternal(component) {\r\n    let addedCompoment = this._findComponent(component);\r\n\r\n    if (addedCompoment == null) {\r\n      this._loadExternal(component);\r\n      this._addComponent(component);\r\n      console.log('load-external-jscss', component);\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.loadExternalJsCssAck,\r\n\t\t{state: true, component: component});\r\n    } else {\r\n      console.error('file already added!', component);\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.loadExternalJsCssAck, {\r\n        state: false,\r\n        component: component,\r\n        error: 'component already added!'});\r\n    }\r\n  }\r\n  _removeExternalByFile(filename, filetype) {\r\n    // determine element type to create nodelist from\r\n    let targetelement = (filetype === 'js') ? 'script' : (filetype === 'css') ? 'link' : 'none';\r\n    // determine corresponding attribute to test for\r\n    let targetattr = (filetype === 'js') ? 'src' : (filetype === 'css') ? 'href' : 'none';\r\n    let allsuspects = document.getElementsByTagName(targetelement);\r\n\r\n    for (let i = allsuspects.length; i >= 0; i--) { // search backwards within nodelist for matching elements to remove\r\n      if (allsuspects[i] \t&&\r\nallsuspects[i].getAttribute(targetattr) != null \t&&\r\nallsuspects[i].getAttribute(targetattr).indexOf(filename) !== -1) {\r\n        allsuspects[i].parentNode.removeChild(allsuspects[i]); // remove element by calling parentNode.removeChild()\r\n        break;\r\n      }\r\n    }\r\n\r\n  }\r\n  _removeExternal(component) {\r\n    let addedCompoment = this._findComponent(component);\r\n\r\n    if (addedCompoment == null) {\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.unloadExternalJsCssAck, {\r\n        state: false,\r\n        component: component,\r\n        error: 'no entry found to remove!'});\r\n    } else {\r\n      let jsBundle = component.jsBundle;\r\n      let cssBundle = component.cssBundle;\r\n\r\n      if (jsBundle && jsBundle.path) {\r\n        this._removeExternalByFile(jsBundle.path, 'js');\r\n      }\r\n      if (cssBundle && cssBundle.path) {\r\n        this._removeExternalByFile(cssBundle.path, 'css');\r\n      }\r\n\r\n      this._deleteComponent(component);\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.unloadExternalJsCssAck, {\r\n        state: true,\r\n        component: component});\r\n\r\n    }\r\n  }\r\n\r\n  _loadExternal(component) {\r\n    let jsBundle = component.jsBundle;\r\n    let cssBundle = component.cssBundle;\r\n\r\n    if (jsBundle && jsBundle.path) {\r\n      let fileref = document.createElement('script');\r\n\r\n      fileref.setAttribute('type', 'text/javascript');\r\n      fileref.setAttribute('src', jsBundle.path);\r\n      if (typeof fileref !== 'undefined') {\r\n        document.getElementsByTagName('head')[0].appendChild(fileref);\r\n      }\r\n    }\r\n    if (cssBundle && cssBundle.path) {\r\n      let fileref = document.createElement('link');\r\n\r\n      fileref.setAttribute('rel', 'stylesheet');\r\n      fileref.setAttribute('type', 'text/css');\r\n      fileref.setAttribute('href', cssBundle.path);\r\n      if (typeof fileref !== 'undefined') {\r\n        document.getElementsByTagName('head')[0].appendChild(fileref);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/dynamic-jscss-loader-store.js","/**\r\n * Created by Herb on 9/27/2016.\r\n */\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'progress-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    inprogressDone: Constants.NAMESPACE + 'inprogress-done',\r\n    inprogressStart: Constants.NAMESPACE + 'inprogress-start'\r\n  },\r\n  out: {\r\n    progressStart: Constants.NAMESPACE + 'progress-start',\r\n    progressCount: Constants.NAMESPACE + 'progress-count',\r\n    progressDone: Constants.NAMESPACE + 'progress-done'\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class ProgressStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._count = 0;\r\n    this._bound = false;\r\n    this.bindEvents();\r\n  }\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.inprogressStart, this._onInProgressStart);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.inprogressDone, this._onInProgressDone);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.inprogressStart, this._onInProgressStart);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.inprogressDone, this._onInProgressDone);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n  _onInProgressStart() {\r\n    if (this._count === 0) {\r\n      this.trigger(Constants.WELLKNOWN_EVENTS.out.progressStart);\r\n    }\r\n    ++this._count;\r\n    this.trigger(Constants.WELLKNOWN_EVENTS.out.progressCount, this._count);\r\n  }\r\n  _onInProgressDone() {\r\n    if (this.count === 0) {\r\n            // very bad.\r\n      console.error(Constants.WELLKNOWN_EVENTS.in.inprogressDone,\r\n                'someone has their inprogress_done mismatched with thier inprogress_start');\r\n    }\r\n    if (this._count > 0) {\r\n      --this._count;\r\n    }\r\n    this.trigger(Constants.WELLKNOWN_EVENTS.out.progressCount, this._count);\r\n    if (this._count === 0) {\r\n      this.trigger(Constants.WELLKNOWN_EVENTS.out.progressDone);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/progress-store.js","import DeepFreeze from '../utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'riotcontrol-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    riotContolAddStore: Constants.NAMESPACE + 'add-store',\r\n    riotContolRemoveStore: Constants.NAMESPACE + 'remove-store'\r\n  },\r\n  out: {}\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class RiotControlStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this._stores = {};\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(riot.EVT.riotControlStore.in.riotContolAddStore, this._onAdd);\r\n      this.on(riot.EVT.riotControlStore.in.riotContolRemoveStore, this._onRemove);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(riot.EVT.riotControlStore.in.riotContolAddStore, this._onAdd);\r\n      this.off(riot.EVT.riotControlStore.in.riotContolRemoveStore, this._onRemove);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n  _onAdd(name, store) {\r\n    this._stores[name] = store;\r\n    console.log(riot.EVT.riotControlStore.in.riotContolAddStore, store);\r\n    riot.control.addStore(store);\r\n  }\r\n  _onRemove(name) {\r\n    console.log(riot.EVT.riotControlStore.in.riotContolRemoveStore, name);\r\n    let store = this._stores[name];\r\n\r\n    while (riot.control._stores.indexOf(store) !== -1) {\r\n      riot.control._stores.splice(riot.control._stores.indexOf(store), 1);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/riotcontrol-store.js","\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\nimport RouteStore from './route-store.js';\r\n\r\nconst RSWKE = RouteStore.getConstants().WELLKNOWN_EVENTS;\r\n\r\nclass Constants {}\r\nConstants.NAME = 'error-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    errorCatchAll: Constants.NAMESPACE + 'catch-all:'\r\n  },\r\n  out: {\r\n    routeDispatch: RSWKE.in.routeDispatch\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class ErrorStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this._error = {};\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.errorCatchAll, this._onError);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.errorCatchAll, this._onError);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  _onError(error) {\r\n    console.log(this.name, Constants.WELLKNOWN_EVENTS.in.errorCatchAll, error);\r\n    this._error = error;\r\n    riot.state.error = error;\r\n    riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.routeDispatch, '/error');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/error-store.js","/**\r\n * Created by Herb on 9/27/2016.\r\n */\r\nimport 'whatwg-fetch';\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\nimport ProgressStore from './progress-store.js';\r\n\r\nconst PSWKE = ProgressStore.getConstants().WELLKNOWN_EVENTS;\r\n\r\nclass Constants {}\r\nConstants.NAME = 'fetch-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    fetch: Constants.NAMESPACE + 'fetch'\r\n  },\r\n  out: {\r\n    inprogressDone: PSWKE.in.inprogressDone,\r\n    inprogressStart: PSWKE.in.inprogressStart\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class FetchStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.fetch, this._onFetch);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.fetch, this._onFetch);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n\r\n  _onFetch(input, init, trigger, jsonFixup = true) {\r\n    console.log(Constants.WELLKNOWN_EVENTS.in.fetch, input, init, trigger, jsonFixup);\r\n\r\n        // we are a json shop\r\n\r\n    riot.control.trigger(riot.EVT.fetchStore.out.inprogressStart);\r\n    if (jsonFixup === true) {\r\n      if (!init) {\r\n        init = {};\r\n      }\r\n\r\n      if (!init.credentials) {\r\n        init.credentials = 'include';\r\n      }\r\n\r\n      if (!init.headers) {\r\n        init.headers = {};\r\n      }\r\n\r\n      if (!init.headers['Content-Type']) {\r\n        init.headers['Content-Type'] = 'application/json';\r\n      }\r\n      if (!init.headers['Accept']) {\r\n        init.headers['Accept'] = 'application/json';\r\n      }\r\n\r\n      if (init.body) {\r\n        let type = typeof (init.body);\r\n\r\n        if (type === 'object') {\r\n          init.body = JSON.stringify(init.body);\r\n        }\r\n      }\r\n    }\r\n\r\n    let myTrigger = JSON.parse(JSON.stringify(trigger));\r\n\r\n    fetch(input, init).then(function (response) {\r\n      riot.control.trigger(riot.EVT.fetchStore.out.inprogressDone);\r\n      let result = {response: response};\r\n\r\n      if (response.status === 204) {\r\n        result.error = 'Fire the person that returns this 204 garbage!';\r\n        riot.control.trigger(myTrigger.name, result, myTrigger);\r\n      }\r\n      if (response.ok) {\r\n        if (init.method === 'HEAD') {\r\n          riot.control.trigger(myTrigger.name, result, myTrigger);\r\n        } else {\r\n          response.json().then((data)=>{\r\n            console.log(data);\r\n            result.json = data;\r\n            result.error = null;\r\n            riot.control.trigger(myTrigger.name, result, myTrigger);\r\n          });\r\n        }\r\n      } else {\r\n        riot.control.trigger(myTrigger.name, result, myTrigger);\r\n      }\r\n    }).catch(function (ex) {\r\n      console.log('fetch failed', ex);\r\n      self.error = ex;\r\n            // todo: event out error to mytrigger\r\n      riot.control.trigger(riot.EVT.fetchStore.out.inprogressDone);\r\n    });\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/fetch-store.js","/**\r\n * Created by Herb on 9/27/2016.\r\n */\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'localstorage-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    localstorageSet: Constants.NAMESPACE + 'set',\r\n    localstorageGet: Constants.NAMESPACE + 'get',\r\n    localstorageRemove: Constants.NAMESPACE + 'remove',\r\n    localstorageClear: Constants.NAMESPACE + 'clear'\r\n  },\r\n  out: {}\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class LocalStorageStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this.bindEvents();\r\n  }\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.localstorageSet, this._onSet);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.localstorageGet, this._onGet);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.localstorageRemove, this._onRemove);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.localstorageClear, this._onClear);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.localstorageSet, this._onSet);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.localstorageGet, this._onGet);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.localstorageRemove, this._onRemove);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.localstorageClear, this._onClear);\r\n      this._bound = !this._bound;\r\n    }\r\n\r\n  }\r\n    /*\r\n    {\r\n        key:[string:required],\r\n        data: [Object],\r\n        trigger:[optional]{\r\n            event:[string],\r\n            riotControl:bool  // do a riotcontrol.trigger or just an observable trigger.\r\n        }\r\n    }\r\n    */\r\n  _onSet(query) {\r\n    console.log(Constants.WELLKNOWN_EVENTS.in.localstorageSet, query);\r\n    localStorage.setItem(query.key, JSON.stringify(query.data));\r\n    if (query.trigger) {\r\n      this.trigger(query.trigger); // in case you want an ack\r\n    }\r\n  }\r\n     /*\r\n        {\r\n            key:'myKey',\r\n            trigger:{\r\n                    event:[string],\r\n                    riotControl:bool  // do a riotcontrol.trigger or just an observable trigger.\r\n             }\r\n        }\r\n    */\r\n  _onGet(query) {\r\n    console.log(Constants.WELLKNOWN_EVENTS.in.localstorageGet, query);\r\n    let stored = localStorage.getItem(query.key);\r\n    let data = null;\r\n\r\n    if (stored && stored !== 'undefined') {\r\n      data = JSON.parse(stored);\r\n    }\r\n    if (query.trigger.riotControl === true) {\r\n      riot.control.trigger(query.trigger.event, data);\r\n    } else {\r\n      this.trigger(query.trigger.event, data);\r\n    }\r\n  }\r\n    /*\r\n     {\r\n     key:'myKey'\r\n     }\r\n     */\r\n  _onRemove(query) {\r\n    console.log(Constants.WELLKNOWN_EVENTS.in.localstorageRemove, query);\r\n    localStorage.removeItem(query.key);\r\n  }\r\n\r\n  _onClear() {\r\n    console.log(Constants.WELLKNOWN_EVENTS.in.localstorageClear);\r\n    localStorage.clear();\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/localstorage-store.js","\r\n/*\r\nvar registerRecord = {\r\n  name:'riotjs-partial-spa',\r\n  views:[\r\n    {view:'my-component-page'},\r\n    {view:'typicode-user-detail'}\r\n  ],\r\n  stores:[\r\n    {store: new TypicodeUserStore()}\r\n  ],\r\n  postLoadEvents:[\r\n    {event:'typicode-init',data:{}}\r\n  ],\r\n  preUnloadEvents:[\r\n    {event:'typicode-uninit',data:{}}\r\n  ]\r\n};\r\nriot.control.trigger('plugin-registration',registerRecord);\r\n\r\n*/\r\nimport DeepFreeze from '../utils/deep-freeze.js';\r\nimport RiotControlStore from './riotcontrol-store.js';\r\n\r\nconst RCSWKE = RiotControlStore.getConstants().WELLKNOWN_EVENTS;\r\n\r\nclass Constants {}\r\nConstants.NAME = 'plugin-registration-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    pluginRegistration: 'plugin-registration',\r\n    pluginUnregistration: 'plugin-unregistration'\r\n  },\r\n  out: {\r\n    pluginRegistrationChanged: 'plugin-registration-changed',\r\n    pluginRegistrationAck: 'plugin-registration-ack',\r\n    pluginUnregistrationAck: 'plugin-unregistration-ack',\r\n    riotContolRemoveStore: RCSWKE.in.riotContolRemoveStore,\r\n    riotContolAddStore: RCSWKE.in.riotContolAddStore\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class PluginRegistrationStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n\r\n    this._bound = false;\r\n    this.bindEvents();\r\n    riot.state.registeredPlugins = new Set();\r\n\r\n  }\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.pluginRegistration, this._registerPlugin);\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.pluginUnregistration, this._unregisterPlugin);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  unbindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.pluginRegistration, this._registerPlugin);\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.pluginUnregistration, this._unregisterPlugin);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n\r\n  _findRegistration(registrationName) {\r\n\r\n    var mySet = riot.state.registeredPlugins;\r\n\r\n    for (let item of mySet) {\r\n      if (item.name === registrationName) {return item;}\r\n    }\r\n    return null;\r\n  }\r\n  _removeRegistration(registrationName) {\r\n\r\n    var mySet = riot.state.registeredPlugins;\r\n\r\n    for (let item of mySet) {\r\n      if (item.name === registrationName) {\r\n        mySet.delete(item);\r\n        break;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  _unregisterPlugin(registration) {\r\n\r\n    var foundRegistration = this._findRegistration(registration.name);\r\n\r\n    if (foundRegistration === null) {\r\n      this.trigger(Constants.WELLKNOWN_EVENTS.out.pluginUnregistrationAck,\r\n        {\r\n          state: false,\r\n          registration: registration,\r\n          error: 'plugin already unregistered!'\r\n        });\r\n    } else {\r\n      // reverse unload\r\n      // 1. PreUnload Events first\r\n      for (let i = 0; i < foundRegistration.preUnloadEvents.length; i++) {\r\n        foundRegistration.stores[i].store.uninitialize();\r\n        riot.control.trigger(foundRegistration.preUnloadEvents[i].event, foundRegistration.preUnloadEvents[i].data);\r\n      }\r\n      // 2. Remove the stores.\r\n      for (let i = 0; i < foundRegistration.stores.length; i++) {\r\n        riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.riotContolRemoveStore, foundRegistration.stores[i].name);\r\n      }\r\n\r\n      this._removeRegistration(registration.name);\r\n      this.trigger(Constants.WELLKNOWN_EVENTS.out.pluginUnregistrationAck,\r\n        {\r\n          state: true,\r\n          registration: registration\r\n        });\r\n\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.pluginRegistrationChanged);\r\n    }\r\n  }\r\n\r\n  _registerPlugin(registration) {\r\n\r\n    var foundRegistration = this._findRegistration(registration.name);\r\n\r\n    if (foundRegistration === null) {\r\n      riot.state.registeredPlugins.add(registration);\r\n\r\n      // 1. Add the stores\r\n      for (let i = 0; i < registration.stores.length; i++) {\r\n        registration.stores[i].name = registration.name + '-store-' + i; // need this for my own tracking\r\n        registration.stores[i].store.initialize();\r\n        riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.riotContolAddStore,\r\n          registration.stores[i].name, registration.stores[i].store);\r\n      }\r\n      // 2. fire post load events\r\n      for (let i = 0; i < registration.postLoadEvents.length; i++) {\r\n        riot.control.trigger(registration.postLoadEvents[i].event, registration.postLoadEvents[i].data);\r\n      }\r\n      this.trigger(Constants.WELLKNOWN_EVENTS.out.pluginRegistrationAck, {state: true, registration: registration});\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.pluginRegistrationChanged);\r\n    } else {\r\n      this.trigger(Constants.WELLKNOWN_EVENTS.out.pluginRegistrationAck,\r\n        {state: false, registration: registration, error: 'plugin already registered!'});\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/plugin-registration-store.js","import DeepFreeze from '../utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'riotcontrol-dispatch-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    dispatch: Constants.NAMESPACE + 'dispatch'\r\n  },\r\n  out: {\r\n  }\r\n};\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class RiotControlDispatchStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    if (this._bound === false) {\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.dispatch, this._onDispatch);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n  bindEvents() {\r\n    if (this._bound === true) {\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.dispatch, this._onDispatch);\r\n      this._bound = !this._bound;\r\n    }\r\n  }\r\n\r\n  _onDispatch(event, data) {\r\n    console.log(Constants.WELLKNOWN_EVENTS.in.dispatch, event, data);\r\n    this.trigger(event, data);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/riotcontrol-dispatch-store.js","import DeepFreeze from '../utils/deep-freeze.js';\r\nimport Router from '../router.js';\r\nimport ComponentLoaderStore from './component-loader-store.js';\r\nimport RouteStore from './route-store.js';\r\n\r\nconst CLSWKE = ComponentLoaderStore.getConstants().WELLKNOWN_EVENTS;\r\nconst RSWKE = RouteStore.getConstants().WELLKNOWN_EVENTS;\r\n\r\nclass Constants {}\r\nConstants.NAME = 'startup-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    start: Constants.NAMESPACE + 'start',\r\n    fetchConfig: Constants.NAMESPACE + 'fetch-config',\r\n    fetchConfigResult: Constants.NAMESPACE + 'fetch-config-result',\r\n    fetchConfigResult2: Constants.NAMESPACE + 'fetch-config-result2',\r\n    componentsAdded: Constants.NAMESPACE + 'components-added',\r\n    allComponentsLoadComplete: CLSWKE.out.allComponentsLoadComplete\r\n  },\r\n  out: {\r\n    routeCatchallReset: RSWKE.in.routeCatchallReset\r\n  }\r\n};\r\n\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class StartupStore {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    riot.observable(this);\r\n    this._bound = false;\r\n    this._startupComplete = false;\r\n    this._done = false;\r\n    this.bindEvents();\r\n  }\r\n  bindEvents() {\r\n\r\n    if (this._bound === false) {\r\n      // ------------------------------------------------------------\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.start, this._onStart);\r\n\r\n      // ------------------------------------------------------------\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.fetchConfig, this._onFetchConfig);\r\n\r\n      // ------------------------------------------------------------\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.fetchConfigResult2, this._onFetchConfigResult2);\r\n\r\n      // ------------------------------------------------------------\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.fetchConfigResult, this._onFetchConfigResult);\r\n\r\n      // ------------------------------------------------------------\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.componentsAdded, this._onComponentsAdded);\r\n\r\n      // ------------------------------------------------------------\r\n      this.on(Constants.WELLKNOWN_EVENTS.in.allComponentsLoadComplete,\r\n        this._onAllComponentsLoadComplete);\r\n      this._bound = !this._bound;\r\n\r\n    }\r\n  }\r\n  unbindEvents() {\r\n\r\n    if (this._bound === true) {\r\n      // ------------------------------------------------------------\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.start, this._onStart);\r\n\r\n      // ------------------------------------------------------------\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.fetchConfig, this._onFetchConfig);\r\n\r\n      // ------------------------------------------------------------\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.fetchConfigResult2, this._onFetchConfigResult2);\r\n\r\n      // ------------------------------------------------------------\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.fetchConfigResult, this._onFetchConfigResult);\r\n\r\n      // ------------------------------------------------------------\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.componentsAdded, this._onComponentsAdded);\r\n\r\n      // ------------------------------------------------------------\r\n      this.off(Constants.WELLKNOWN_EVENTS.in.allComponentsLoadComplete,\r\n        this._onAllComponentsLoadComplete);\r\n      this._bound = !this._bound;\r\n\r\n    }\r\n  }\r\n  // this is the one and only handler when components are added and loaded.\r\n  // it is meant to trigger a route rebuild.\r\n  _onAllComponentsLoadComplete() {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.allComponentsLoadComplete);\r\n    riot.control.trigger(Constants.WELLKNOWN_EVENTS.out.routeCatchallReset);\r\n  }\r\n  _onComponentsAdded(ack) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.componentsAdded, ack);\r\n    riot.control.trigger(ack.ack.evt, ack.ack);\r\n  }\r\n  _onFetchConfigResult(result, myTrigger) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.fetchConfigResult, result, myTrigger);\r\n    if (result.error || !result.response.ok) {\r\n      riot.control.trigger(riot.EVT.errorStore.in.errorCatchAll, {code: 'startup-config1234'});\r\n    } else {\r\n      riot.control.trigger(riot.EVT.componentLoaderStore.in.addDynamicComponents\r\n        , result.json.components, {evt: Constants.WELLKNOWN_EVENTS.in.componentsAdded,\r\n          ack: myTrigger.ack});\r\n    }\r\n  }\r\n  _onFetchConfigResult2(result, myTrigger) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.fetchConfigResult2,\r\n      result, myTrigger);\r\n  }\r\n  _onFetchConfig(path, ack) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.fetchConfig, path);\r\n    let url = path;\r\n    let trigger = {\r\n      name: Constants.WELLKNOWN_EVENTS.in.fetchConfigResult,\r\n      ack: ack\r\n    };\r\n    let trigger2 = {\r\n      name: Constants.WELLKNOWN_EVENTS.in.fetchConfigResult2,\r\n      ack: ack\r\n    };\r\n\r\n    riot.control.trigger(riot.EVT.fetchStore.in.fetch, url, {method: 'HEAD'}, trigger2);\r\n    riot.control.trigger(riot.EVT.fetchStore.in.fetch, url, null, trigger);\r\n  }\r\n  _onStart(nextTag) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.start, this._done, nextTag);\r\n    if (this._done) {\r\n      return;\r\n    }\r\n\r\n    if (!nextTag) {\r\n      nextTag = 'app';\r\n    }\r\n    riot.mount(nextTag);\r\n    if (nextTag === 'app') {\r\n      this._done = true;\r\n      // only when the nextTag is 'app' do we engage the router.\r\n      // 'app' is last\r\n      riot.router = new Router();\r\n      riot.route.start(true);\r\n    }\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/stores/startup-store.js","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riot\"\n// module id = 12\n// module chunks = 0","import DeepFreeze from './utils/deep-freeze.js';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'router';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {},\r\n  out: {\r\n  }\r\n};\r\n\r\nDeepFreeze.freeze(Constants);\r\n\r\nexport default class Router {\r\n  static getConstants() {\r\n    return Constants;\r\n  }\r\n  constructor() {\r\n    // we need this to easily check the current route from every component\r\n    riot.routeState.view = '';\r\n    this.r = riot.route.create();\r\n    this.resetCatchAll();\r\n  }\r\n\r\n  resetCatchAll() {\r\n    this.r.stop();\r\n    let mySet = riot.state.registeredPlugins;\r\n\r\n    for (let item of mySet) {\r\n      if (item.registrants && item.registrants.routeContributer) {\r\n        item.registrants.routeContributer.contributeRoutes(this.r);\r\n      }\r\n    }\r\n    this._onContributeCatchAllRoute(this.r);\r\n  }\r\n\r\n  _onContributeCatchAllRoute(r) {\r\n    console.log(Constants.NAME, Constants.WELLKNOWN_EVENTS.in.contributeCatchAllRoute, r);\r\n    if (riot.state.componentLoaderState && riot.state.componentLoaderState.components) {\r\n      for (let item of riot.state.componentLoaderState.components) {\r\n        let component = item[1];\r\n\r\n        if (component.state.loaded === false) {\r\n          r(component.routeLoad.route, ()=>{\r\n            console.log('catchall route handler of:', component.routeLoad.route);\r\n\r\n            let path = riot.route.currentPath();\r\n\r\n            this.postResetRoute = path;\r\n            riot.control.trigger('load-dynamic-component', component.key);\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    r('/..', ()=>{\r\n      console.log('route handler of /  ');\r\n      riot.control.trigger(Constants.WELLKNOWN_EVENTS.in.routeDispatch,\r\n        riot.state.route.defaultRoute);\r\n    });\r\n    if (this.postResetRoute != null) {\r\n      let postResetRoute = this.postResetRoute;\r\n\r\n      this.postResetRoute = null;\r\n      riot.control.trigger('riot-route-dispatch', postResetRoute, true);\r\n    }\r\n  }\r\n\r\n  loadView(view) {\r\n    if (this._currentView) {\r\n      this._currentView.unmount(true);\r\n    }\r\n    riot.routeState.view = view;\r\n    this._currentView = riot.mount('#riot-app', view)[0];\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/router.js","export default class RiotRouteExtension {\r\n  constructor() {\r\n    var self = this;\r\n\r\n    self.name = 'RiotRouteExtension';\r\n    self.namespace = self.name + ':';\r\n    self.currentPath = '';\r\n\r\n    self._defaultParser = (path) =>{\r\n      self.currentPath = path;\r\n      return path.split(/[/?#]/);\r\n    };\r\n    self._getCurrentPath = () => {\r\n      return self.currentPath;\r\n    };\r\n    riot.route.parser(self._defaultParser, null);\r\n    riot.route.currentPath = self._getCurrentPath;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/extensions/riot-route-extension.js","\r\nimport ProgressStore from './stores/progress-store.js';\r\nimport FetchStore from './stores/fetch-store.js';\r\nimport DynamicJsCssLoaderStore from './stores/dynamic-jscss-loader-store.js';\r\nimport ComponentLoaderStore from './stores/component-loader-store.js';\r\nimport LocalStorageStore from './stores/localstorage-store.js';\r\nimport ErrorStore from './stores/error-store.js';\r\nimport RouteStore from './stores/route-store.js';\r\nimport RiotControlStore from './stores/riotcontrol-store.js';\r\nimport RiotControlDispatchStore from './stores/riotcontrol-dispatch-store.js';\r\nimport PluginRegistrationStore from './stores/plugin-registration-store.js';\r\nimport StartupStore from './stores/startup-store.js';\r\nimport Router from './router.js';\r\n\r\nexport default class MasterEventTable {\r\n\r\n  constructor() {\r\n    riot.EVT = {};\r\n\r\n    riot.EVT.progressStore = ProgressStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.routeStore = RouteStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.dynamicJsCssLoaderStore = DynamicJsCssLoaderStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.componentLoaderStore = ComponentLoaderStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.errorStore = ErrorStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.fetchStore = FetchStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.localStorageStore = LocalStorageStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.riotControlStore = RiotControlStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.riotControlDispatchStore = RiotControlDispatchStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.pluginRegistrationStore = PluginRegistrationStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.startupStore = StartupStore.getConstants().WELLKNOWN_EVENTS;\r\n    riot.EVT.router = Router.getConstants().WELLKNOWN_EVENTS;\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/master-event-table.js","export default class RandomString {\r\n  constructor() {\r\n    var self = this;\r\n\r\n    self.name = 'RandomString';\r\n    self.namespace = self.name + ':';\r\n    self.generateRandomString = (length) =>{\r\n      if (length && length > 16) {\r\n        length = 16;\r\n      } else {\r\n        length = 16;\r\n      }\r\n\r\n      let text = '';\r\n      let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n      for (let i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n      }\r\n      return text;\r\n    };\r\n    self.hashString = (str) =>{\r\n      let hash = 5381;\r\n      let i = str.length;\r\n\r\n      while (i) {\r\n        hash = (hash * 33) ^ str.charCodeAt(--i);\r\n      }\r\n/* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\r\n* integers. Since we want the results to be always positive, convert the\r\n* signed int to an unsigned by doing an unsigned bitshift. */\r\n      return hash >>> 0;\r\n    };\r\n    self.randomHash = (length) =>{\r\n      return self.hashString(self.generateRandomString(length));\r\n    };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/utils/random-string.js","\n    var riot = require('riot')\n    riot.tag2('startup', '', '', '', function(opts) {\n\tvar self = this;\n  if(self.opts.config){\n    self.config = self.opts.config;\n  }\n  self.nextTag = 'app';\n  if(self.opts.nextTag){\n    self.nextTag = self.opts.nextTag;\n  }\n  self.loaded = false;\n  self.on('mount', () => {\n    riot.control.on('startup-tag-fetch-config-ack',\n                    self.onStartupTagFetchConfigAck);\n    riot.control.trigger(riot.EVT.startupStore.in.fetchConfig,self.config,\n      {evt:'startup-tag-fetch-config-ack'});\n  });\n\n  self.on('unmount', () => {\n    riot.control.off('startup-tag-fetch-config-ack',\n                    self.onStartupTagFetchConfigAck);\n  });\n  self.onStartupTagFetchConfigAck = () =>{\n    if(!self.loaded){\n      self.loaded = true;\n      riot.control.off('startup-tag-fetch-config-ack',\n                    self.onStartupTagFetchConfigAck);\n      riot.control.trigger(riot.EVT.startupStore.in.start,self.nextTag);\n    }\n  }\n\n});\n    \n  \n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/components/startup.tag","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riot-route\"\n// module id = 18\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riotcontrol\"\n// module id = 19\n// module chunks = 0","import 'riot';\r\nimport route \t\t\t\t\t\t          from 'riot-route';\r\nimport RiotControl \t\t\t\t\t      from 'riotcontrol';\r\nimport RandomString \t\t\t\t      from './utils/random-string.js';\r\nimport RiotRouteExtension \t\t\t  from './extensions/riot-route-extension.js';\r\nimport ProgressStore from './stores/progress-store.js';\r\nimport DynamicJsCssLoaderStore from './stores/dynamic-jscss-loader-store.js';\r\nimport ComponentLoaderStore     \tfrom './stores/component-loader-store.js';\r\nimport ErrorStore               \tfrom './stores/error-store.js';\r\nimport FetchStore           \t\t  from './stores/fetch-store.js';\r\nimport LocalStorageStore         \tfrom './stores/localstorage-store.js';\r\nimport RiotControlStore from './stores/riotcontrol-store.js';\r\nimport RouteStore \t\t\t\t        from './stores/route-store.js';\r\nimport PluginRegistrationStore \t\tfrom './stores/plugin-registration-store.js';\r\nimport StartupStore \t\t\t\t      from './stores/startup-store.js';\r\nimport RiotControlDispatchStore \tfrom './stores/riotcontrol-dispatch-store.js';\r\nimport MasterEventTable from './master-event-table.js';\r\n\r\nimport './components/startup.tag';\r\n\r\nexport default class P7HostCore {\r\n\r\n  constructor() {\r\n    this._masterEventTable = new MasterEventTable();\r\n    this._name = 'P7HostCore';\r\n    window.riot = riot;  // TODO: ask Zeke about this\r\n    riot.route = route;\r\n    riot.control = RiotControl;\r\n    riot.state = {};\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  Initialize() {\r\n\r\n    riot.routeState = {};\r\n\r\n    let randomString = new RandomString();\r\n    let hash = randomString.randomHash();\r\n\r\n    riot.state = {\r\n      _internal: {\r\n        hash: hash\r\n      },\r\n      error: {code: 'unknown'},\r\n      route: {\r\n        defaultRoute: 'main/home'\r\n      }\r\n    };\r\n    this._riotRouteExtension \t\t\t= new RiotRouteExtension();\r\n\r\n    this._progressStore \t\t\t\t= new ProgressStore();\r\n    this._dynamicJsCssLoaderStore \t\t= new DynamicJsCssLoaderStore();\r\n    this._componentLoaderStore \t\t\t= new ComponentLoaderStore();\r\n    this._errorStore \t\t\t\t\t= new ErrorStore();\r\n    this._fetchStore \t\t\t\t\t= new FetchStore();\r\n    this._localStorageStore \t\t\t= new LocalStorageStore();\r\n    this._riotControlStore \t\t\t\t= new RiotControlStore();\r\n    this._routeStore \t\t\t\t\t= new RouteStore();\r\n    this._pluginRegistrationStore \t\t= new PluginRegistrationStore();\r\n    this._riotControlDispatchStore \t\t= new RiotControlDispatchStore();\r\n    this._startupStore \t\t\t\t\t= new StartupStore();\r\n\r\n    riot.control.addStore(this._progressStore);\r\n    riot.control.addStore(this._dynamicJsCssLoaderStore);\r\n    riot.control.addStore(this._componentLoaderStore);\r\n    riot.control.addStore(this._errorStore);\r\n    riot.control.addStore(this._fetchStore);\r\n    riot.control.addStore(this._localStorageStore);\r\n    riot.control.addStore(this._riotControlStore);\r\n    riot.control.addStore(this._routeStore);\r\n    riot.control.addStore(this._pluginRegistrationStore);\r\n    riot.control.addStore(this._riotControlDispatchStore);\r\n    riot.control.addStore(this._startupStore);\r\n\r\n    return riot;\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/p7-host-core/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_21__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"whatwg-fetch\"\n// module id = 21\n// module chunks = 0"],"sourceRoot":""}